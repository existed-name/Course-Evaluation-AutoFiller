详略

---

```java
打成的jpackage，设定为--win-console，
但是我在想，我的项目有非ASCII字符、emoji，命令行好像默认GBK？（反正不是UTF-8）
如果说运行jar包还可以先chcp 65001变成UTF-8，但是现在打出包的话，它直接运行会是什么编码😱
```

```java
😵
我靠，又来bug了🐛

if (System.getProperty("os.name").toLowerCase().contains("windows")) {
    try {
        // 强制将当前控制台输出代码页改为 65001 (UTF-8)
        new ProcessBuilder("cmd", "/c" , "chcp 65001" // " > nul" 不展示 "Active code page: 65001"
        ).inheritIO().start().waitFor();
    } catch (Exception ignored) {}
}

打包后，我觉得如果Jar包可以，那么JPackage理论上也可以正常展示，于是我想测试Jar包

cmd运行jar包，它也确实Active code page: 65001
然而打出了一堆�（除非是ASCII字符）😶

更离谱的是，我在当前窗口，第2次运行jar包，他就是正常展示了😂

这是chcp 65001生效有延迟嘛🤨
我该怎么修改🧐建议&提醒/注意👀
```

---
